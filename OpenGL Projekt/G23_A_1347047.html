<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Computergraphik is a suicide project</title>
 
<script id="vertex-shader" type="x-shader/x-vertex">
attribute  vec4 vPosition;
attribute  vec3 vNormal;
attribute  vec4 vColor;

varying vec4 fColor;
uniform bool lighting;

uniform vec4 diffuseProduct;
uniform vec4 specularProduct;
uniform vec4 ambientProduct;
uniform vec4 lightPosition;

uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 normalMatrix;

attribute vec2 vTexCoord;
varying vec2 vTextureCoord;

void main()
{
  if (lighting) {
    vec3 eye = vec3(0,0,0);
    vec3 pos = (viewMatrix * modelMatrix * vPosition).xyz;
    vec3 light = (viewMatrix * lightPosition).xyz;
    vec3 L = normalize( light - pos );
    vec3 N = (normalMatrix * vec4(vNormal, 0.0)).xyz;
    N = normalize(N);
    float Kd = max( dot(L, N), 0.0 );
    vec3  diffuse = Kd*diffuseProduct.rgb;
    vec3 v = normalize(eye.xyz - pos);
    vec3 h = normalize(v + L);
    float s = max(dot(h, N), 0.0);
    vec3 speculareLight = pow(s, 100.0) * specularProduct.xyz;
    fColor = vec4(diffuse.xyz, 1.0) + vec4(speculareLight.xyz, 1.0) + vec4(ambientProduct.xyz, 1.0);
  } else {
    fColor = vColor;
  }
  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vPosition;
  vTextureCoord = vTexCoord;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
precision mediump float;
varying vec4 fColor;
uniform sampler2D texture;
varying vec2 vTextureCoord;
uniform bool setImage;
uniform bool cartoon;

void main()
{
  if (cartoon) {
    float H = 0.5 * (fColor.r + fColor.g + fColor.b);
  
    vec4 resultColor;
    if (H < 0.3) {
      resultColor = vec4(0.2, 0.2, 0.2, 1.0);  // Grauwert mit Helligkeit 0.2
    } else if (H > 0.75) {
      resultColor = vec4(0.9, 0.7, 0.0, 1.0);  // (0.9, 0.7, 0, 1) für H > 0.75
    } else {
      resultColor = vec4(0.6, 0.4, 0.1, 1.0);  // (0.6, 0.4, 0.1, 1) für andere Fälle
    }
  
    // Den resultierenden Farbwert in die vordefinierte Variable gl_FragColor schreiben
    gl_FragColor = resultColor;
    }

    else{
      gl_FragColor = fColor;
    }
    
  if (setImage) {
    gl_FragColor = mix(fColor, texture2D(texture, vec2(vTextureCoord)), 0.7);
  } 
}
</script>

<script type="text/javascript" src="./Common/webgl-utils.js"></script>
<script type="text/javascript" src="./Common/initShaders.js"></script>
<script type="text/javascript" src="./Common/MV.js"></script>
<script type="text/javascript" src="G23_A_1347047.js"></script>
</head>

<body>

<div>
<label id="fps">FPS</label>
</div>

<div>
<select id="Cameralist" size="5"> 
<option selected value=0>Originalkamera</option> 
<option value=1>x-Achse</option> 
<option value=2>y-Achse</option> 
<option value=3>z-Achse</option> 
<option value=4>Pyramidenspitze</option> 
</select> 
</div>

<div>
<button id = "ButtonX">Rotate X</button>
<button id = "ButtonY">Rotate Y</button>
<button id = "ButtonZ">Rotate Z</button>
<button id = "ButtonT">Rotate On/Off</button>
</div>

<canvas id="gl-canvas" width="600" height="600">
The HTML 5 Canvas is not supported by your browser. Please use another browser to view this page.
<img id="texImage" src="hsrm.gif" hidden crossorigin="anonymous"> </img>
</canvas>

</body>
</html>
